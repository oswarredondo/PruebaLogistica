Ext.define('MyDesktop.view.GridLocalizacion', {    extend: 'Ext.grid.Panel',    requires: [        'Ext.grid.column.Action'    ],    stateful: true,    collapsible: true,    multiSelect: true,    stateId: 'stateGridLocalizacion',    height: 350,    title: 'Localizaci�n',    viewConfig: {        stripeRows: true,        enableTextSelection: true    },	id:undefined,	isConsulta:false,	myScope:undefined,	idCliente:undefined,	nombreCliente:undefined,    initComponent: function () {		this.myScope = this;		this.iconCls='contactos_blue';		this.combo_tipos_busqueda= Ext.create('Ext.form.ComboBox', {					fieldLabel: '',					disabled: false,					editable:false,					forceSelection:true,					store: Ext.create('MyDesktop.store.StoreTiposBusquedaContactos',{}) ,					queryMode: 'local',					emptyText: 'Seleccione orden',					displayField: 'descripcion',					valueField: 'idtipo'		});				this.tbar=[			{xtype: 'label', text:'Cliente Seleccionado:'	},			this.combo_tipos_busqueda,			{xtype: 'label', text:'Patr�n:'	},			{xtype: 'textfield' , id:'idpatronContacto', allowBlank: false},			{ text: 'Filtrar',iconCls: 'buscar',handler:this.filtrar},			{xtype: 'tbfill'},						{ text: 'Mostrar Detalles',iconCls: 'detalles',handler:this.filtrar,handler:this.showDetails, scope:this.myScope },						{xtype:'tbseparator'},						{ text: 'Agregar',iconCls: 'agregar',handler:this.filtrar,handler:this.agregar, scope:this.myScope },						{ text: 'Modificar',iconCls: 'editar',handler:this.modificar,scope:this.myScope },						{ text: 'Desactivar',iconCls: 'borrar',handler:this.eliminar,scope:this.myScope }								];		//Si el grid no es de consulta entonces muestra la barra para administrar los datos		if (!this.isConsulta){		}				this.store = Ext.create('MyDesktop.store.StoreContacto',{});		this.selType= 'checkboxmodel';		        this.width = 650;        this.columns = [						{							menuDisabled: true,							sortable: false,							xtype: 'actioncolumn',							width: 50,							items: [								{									getClass: function(v, meta, rec) {										if (rec.get('estatus') == 1) {											return 'activo' ;										} else {												return 'desactivado';										}									},									getTip: function(v, meta, rec) {										if (rec.get('estatus') == 1) {											return 'Activo' ;										} else {												return 'Desactivado';										}									},									handler: function(grid, rowIndex, colIndex) {										var rec = grid.getStore().getAt(rowIndex),										action = (rec.get('estatus') ==1 ? 'Activo' : 'Desactivado');										Ext.Msg.alert(action, action + ' ' + rec.get('nombre'));									}								}							]						},						{text     : 'Tel. Oficina',flex     : 1,sortable : false,dataIndex: 'telefono1'},						{text     : 'Tel. Celular',flex     : 1,sortable : false,dataIndex: 'telefono'},						{text     : 'Fax',flex     : 1,sortable : false,dataIndex: 'fax'},						{text     : 'Radio',flex     : 1,sortable : false,dataIndex: 'radio'},						{text     : 'Email',flex     : 1,sortable : false,dataIndex: 'email'},						{text     : 'Twitter',flex     : 1,sortable : false,dataIndex: 'twitter'},						{text     : 'Pag. Web',flex     : 1,sortable : false,dataIndex: 'paginaweb'}	        ];        this.callParent();    },	updateClienteSelected:function(idcliente, nombre, grid){		this.idCliente = idcliente;		this.nombreCliente=nombre;	},	agregar:function(){		//Crea una forma de clientes para agregar los datos		var forma_agregar = Ext.create('MyDesktop.view.FormLocalizacion',{id:'agregar_contacto'}); 		Ext.create('widget.window', {			id:'utils-win-agregar-cliente',			title: "Agregar Datos Localizaci�n",			width: 450,			height: 260,			modal:true,			plain: true,			headerPosition: 'right',			layout: 'fit',			items: forma_agregar					}).show();	},	modificar:function(){		var rows =  this.getView().getSelectionModel().getSelection();     	if(rows.length <=0){     		alert("Debe de Seleccionar solo un registro para modificar");     		return;     	}		if(rows.length >1){     		alert("Seleccione solamente un registro a modificar");     		return;     	}		//Crea una forma de clientes para agregar los datos		var forma_modificar = Ext.create('MyDesktop.view.FormLocalizacion',{id:'modificar_contacto'}); 		forma_modificar.updateCampos(rows[0]);		Ext.create('widget.window', {			id:'utils-win-agregar-cliente',			title: "Modificar Datos Localizaci�n",			width: 450,			height: 260,			modal:true,			plain: true,			headerPosition: 'right',			layout: 'fit',			items: forma_modificar					}).show();	},			eliminar:function(){		var rows =  this.getView().getSelectionModel().getSelection();     	if(rows.length <=0){     		alert("Seleccione los registros que desea eliminar");     		return;     	}		if(!confirm('Desea desactivar los contactos seleccionados?')){     		return;     	}		alert('contactos desactivados');	},	showDetails:function(){		},	reload:function(idcliente){		}	});