Ext.define('MyDesktop.view.GridDirecciones', {    extend: 'Ext.grid.Panel',    requires: [        'Ext.grid.column.Action'    ],    stateful: true,    collapsible: false,    multiSelect: true,    stateId: 'stateGridDireccionesClientes',    viewConfig: {        stripeRows: true,        enableTextSelection: true    },	id:undefined,	isConsulta:false,	myScope:undefined,	idcliente:undefined, 	numcliente:undefined,    initComponent: function () {		this.myScope = this;						//Si el grid no es de consulta entonces muestra la barra para administrar los datos		if (!this.isConsulta){		}				this.store = Ext.create('MyDesktop.store.StoreDireccion',{});				var sm = Ext.create('Ext.selection.CheckboxModel',{mode : 'SINGLE'});		this.selModel= sm;		this.selType= 'checkboxmodel';		this.tbar=[			{xtype: 'tbfill'},						{xtype:'tbseparator'},						{ text: 'Agregar',iconCls: 'agregar',handler:this.agregar, scope:this.myScope },						{xtype:'tbseparator'},						{ text: 'Modificar',iconCls: 'editar',handler:this.modificar,scope:this.myScope },						{xtype:'tbseparator'},						{ text: 'Borrar',iconCls: 'borrar',handler:this.eliminar,scope:this.myScope }		];                this.columns = [						/*{							menuDisabled: true,							sortable: false,							xtype: 'actioncolumn',							width: 30,							items: [								{									getClass: function(v, meta, rec) {										if (rec.get('dirdefault') == 9){											return 'dir_default'; 										}else if (rec.get('dirdefault') == 8){											return 'dir_revisar';										}																			},									getTip: function(v, meta, rec) {										if (rec.get('dirdefault') == 9){											return 'Dir.Fiscal';											}else if (rec.get('dirdefault') == 8){											return 'Dir.Revision';											}									},									handler: function(grid, rowIndex, colIndex) {										//var rec = grid.getStore().getAt(rowIndex),										//action = (rec.get('estatus') ==1 ? 'Activo' : 'Desactivado');										//Ext.Msg.alert(action, action + ' ' + rec.get('nombre'));																			}								}							]						},*/					    {text     : 'Clasificaci�n',flex     : 1,sortable : false,dataIndex: 'clasificacion'},						{text     : 'Calle',flex     : 1,sortable : false,dataIndex: 'calle'},						{text     : '#Interior',width:70,sortable : false,dataIndex: 'numinterior'},						{text     : '#Exterior',width:70,sortable : false,dataIndex: 'numexterior'},						{text     : 'Colonia',flex     : 1,sortable : false,dataIndex: 'colonia'},						{text     : 'Municipio',flex     : 1,sortable : false,dataIndex: 'municipio'},						{text     : 'Estado',flex     : 1,sortable : false,dataIndex: 'estado'},						{text     : 'C.P',width:70,sortable : false,dataIndex: 'cp'},						{text     : 'Observacion',flex     : 1,sortable : false,dataIndex: 'observacion'}									];			this.callParent();    },	agregar:function(){		//Crea una forma de clientes para agregar los datos		var forma_agregar = Ext.create('MyDesktop.view.FormDireccionCliente',				{id:'agregar_direccioncliente',operacion:'insert',			idcliente:this.idCliente,main_grid:this}); 		forma_agregar.setIdCliente(this.idCliente);		var ventana = Ext.create('widget.window', {			id:'utils-win-agregar-cliente',			title: "Agregar Datos Direcci�n Cliente",			width: 600,			height: 350,			modal:true,			plain: true,			headerPosition: 'right',			layout: 'fit',			items: forma_agregar					});		ventana.show();				forma_agregar.setWinPrincipal(ventana);	},	modificar:function(){		var rows =  this.getView().getSelectionModel().getSelection();     	if(rows.length <=0){     		Ext.Msg.alert('Verificar',"Debe de Seleccionar solo un registro para modificar");     		return;     	}		if(rows.length >1){     		Ext.Msg.alert('Verificar',"Seleccione solamente un registro a modificar");     		return;     	}		//Crea una forma de clientes para agregar los datos		var forma_modificar = Ext.create('MyDesktop.view.FormDireccionCliente',{			id:'modificar_direccioncliente',idcliente:this.idCliente,operacion:'update',main_grid:this}); 		forma_modificar.updateCampos(rows[0]);		var ventana =Ext.create('widget.window', {			id:'utils-win-agregar-cliente',			title: "Modificar Datos Direcci�n Cliente",			width: 600,			height: 350,			modal:true,			plain: true,			headerPosition: 'right',			layout: 'fit',			items: forma_modificar					});		ventana.show();				forma_modificar.setWinPrincipal(ventana);	},		showDetails:function(){			var rows =  this.getView().getSelectionModel().getSelection();     	if(rows.length <=0){     		Ext.Msg.alert('Verificar',"Debe de Seleccionar solo un registro para modificar");     		return;     	}		if(rows.length >1){     		Ext.Msg.alert('Verificar',"Seleccione solamente un registro a modificar");     		return;     	}		//Crea una forma de clientes para agregar los datos		var forma_showdetails = Ext.create('MyDesktop.view.FormDireccionCliente',{id:'showdetails_cliente',showReadOnly:true}); 		forma_showdetails.updateFieldReadOnly(rows[0]);		Ext.create('widget.window', {			id:'utils-win-agregar-cliente',			title: "Detalles Datos Cliente",			width: 600,			height: 400,			modal:true,			plain: true,			headerPosition: 'right',			layout: 'fit',			items: forma_showdetails					}).show();	},			eliminar:function(){		var rows =  this.getView().getSelectionModel().getSelection();     	if(rows.length <=0){     		 Ext.Msg.alert('Verificar',"Seleccione los registros que desea eliminar");     		return;     	}    	 Ext.MessageBox.confirm('Confirmacion', 'Desea borrar los registros seleccionados?', function(id, text){       		if ( (id === 'yes')  || (id === 'si') || (id === 'y' ) || (id === 's' ) ){        			if(rows.length == 0){  //step 3       				return ;       			}       			var store = this.getView().getStore();       			//Elimina los registros seleccionados       			deleteSyncStore(this, store, rows,true);       		}       	 },this);    	 	},		setProxyURL:function(url){		//Actualiza el URL para poder redireccionar el cargado de datos		this.getView().getStore().getProxy().url = url;		this.getView().getStore().load();	},	showDetailsDirecciones:function(){		var rows =  this.getView().getSelectionModel().getSelection();     	if(rows.length <=0){     		Ext.Msg.alert('Verificar',"Debe de Seleccionar solo un registro para modificar");     		return;     	}		if(rows.length >1){     		Ext.Msg.alert('Verificar',"Seleccione solamente un registro a modificar");     		return;     	}		//Crea una forma de clientes para agregar los datos		var forma_showdetails_direcciones = Ext.create('MyDesktop.view.GridDirecciones',			{				id:'showdetailsdirecciones_cliente',				idcliente:rows[0].get('idcliente'), 				numcliente:rows[0].get('numcliente')			}); 			Ext.create('widget.window', {			id:'utils-win-agregar-cliente',			title: "Detalles Datos Direcciones Cliente",			width: 600,			height: 500,			modal:true,			plain: true,			headerPosition: 'right',			layout: 'fit',			items: forma_showdetails_direcciones					}).show();			},		reload:function(idcliente){		this.getView().getStore().reload(				{					params:{idcliente:idcliente},					callback:function(r,options,success){						 if (r.length<=0){						 }					 }	  				});			},	setIdCliente:function(idcliente){		this.idCliente = idcliente;	}	});